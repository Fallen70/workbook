<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>WorkBook - Curl</title><link href="https://fallen70.github.io/workbook/" rel="alternate"></link><link href="https://fallen70.github.io/workbook/feeds/curl.atom.xml" rel="self"></link><id>https://fallen70.github.io/workbook/</id><updated>2021-08-02T17:00:00+02:00</updated><entry><title>Actions nexus avec curl</title><link href="https://fallen70.github.io/workbook/actions-nexus-avec-curl.html" rel="alternate"></link><published>2021-08-02T17:00:00+02:00</published><updated>2021-08-02T17:00:00+02:00</updated><author><name>Fallen70</name></author><id>tag:fallen70.github.io,2021-08-02:/workbook/actions-nexus-avec-curl.html</id><content type="html">&lt;h1&gt;Upload&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;curl -v --user &lt;span class="s1"&gt;&amp;#39;user:pass&amp;#39;&lt;/span&gt; --upload-file /path/to/file http://nexus/nexus/repository/component/subfolder/file
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;Delete&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;curl -X DELETE -v --user  &lt;span class="s1"&gt;&amp;#39;user:pass&amp;#39;&lt;/span&gt;  http://nexus/nexus/repository/component/subfolder/file
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Curl"></category><category term="nexus"></category><category term="admin-sys"></category></entry><entry><title>Test StickySession avec curl</title><link href="https://fallen70.github.io/workbook/test-stickysession-avec-curl.html" rel="alternate"></link><published>2021-08-02T13:15:00+02:00</published><updated>2021-08-02T13:15:00+02:00</updated><author><name>Fallen70</name></author><id>tag:fallen70.github.io,2021-08-02:/workbook/test-stickysession-avec-curl.html</id><summary type="html">&lt;p&gt;Méthode pour tester la session sur plusieurs loadbalancers avec curl.&lt;/p&gt;
&lt;p&gt;En parallèle vérifier que la route est bien respectée en surveillant les logs des machine ciblées par les routes&lt;/p&gt;
&lt;p&gt;Explication sur certaines options de curl&lt;/p&gt;
&lt;p&gt;-H 'host:ServerName' pour cibler un vhost par son ServerName&lt;/p&gt;
&lt;p&gt;--cookie-jar /tmp/cookie Sauver le …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Méthode pour tester la session sur plusieurs loadbalancers avec curl.&lt;/p&gt;
&lt;p&gt;En parallèle vérifier que la route est bien respectée en surveillant les logs des machine ciblées par les routes&lt;/p&gt;
&lt;p&gt;Explication sur certaines options de curl&lt;/p&gt;
&lt;p&gt;-H 'host:ServerName' pour cibler un vhost par son ServerName&lt;/p&gt;
&lt;p&gt;--cookie-jar /tmp/cookie Sauver le cookie&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Récupérer le cookie &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;curl --cookie-jar /tmp/cookie   -v -I -H &amp;#39;host:ServerName&amp;#39; monserveur.cible-01
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Dans la sortie console on aura l'ionformation de création du  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nt"&gt;Added&lt;/span&gt; &lt;span class="nt"&gt;cookie&lt;/span&gt; &lt;span class="nt"&gt;ROUTEID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;.1&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;for&lt;/span&gt; &lt;span class="nt"&gt;domain&lt;/span&gt; &lt;span class="nt"&gt;ServerName&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;path&lt;/span&gt; &lt;span class="o"&gt;/,&lt;/span&gt; &lt;span class="nt"&gt;expire&lt;/span&gt; &lt;span class="nt"&gt;0&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nt"&gt;Set-Cookie&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;ROUTEID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;path&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;
&lt;span class="nt"&gt;Set-Cookie&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;ROUTEID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;path&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;Utiliser le cookie sur une autre adresse partageant un Servername&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;--cookie /tmp/cookie Utilise le cookie créé&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;curl --cookie /tmp/cookie   -v -I -H &amp;#39;host:ServerName&amp;#39; monserveur.cible-02
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Le cookie est bien exploité&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; HEAD / HTTP/1.1
&amp;gt; User-Agent: curl/7.29.0
&amp;gt; Accept: */*
&amp;gt; Cookie: ROUTEID=.1
&amp;gt; host:ServerName
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Curl"></category><category term="load-balancer"></category></entry></feed>